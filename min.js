"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DELETE="del",INSERT="ins",SUBSTITUTE="sub",TypedArray=/^u/.test("undefined"==typeof Int32Array?"undefined":_typeof(Int32Array))?Array:Int32Array,addOperation=function(t,e,o,n,r,i){t.unshift({type:e,x:o,y:n,count:r,items:i})},aura=function(t,e){var o=e.splice;return e.splice=function n(){e.splice=o;var r=t.splice.apply(t,arguments);return e.splice=n,r},e},getOperations=function(t,e,o){for(var n=[],r=t.length+1,i=e.length+1,a=r-1,p=i-1,u=void 0,y=void 0,c=void 0,s=void 0,d=void 0,f=void 0;p&&a;)f=(d=a*i+p)-i,u=o[d],y=o[f],c=o[d-1],(s=o[f-1])<=c&&s<=y&&s<=u?(p--,a--,s<u&&addOperation(n,SUBSTITUTE,p,a,1,[e[p]])):c<=y&&c<=u?addOperation(n,INSERT,--p,a,0,[e[p]]):addOperation(n,DELETE,p,--a,1,[]);for(;p--;)addOperation(n,INSERT,p,a,0,[e[p]]);for(;a--;)addOperation(n,DELETE,p,a,1,[]);return n},levenstein=function(t,e){var o=t.length+1,n=e.length+1,r=new TypedArray(o*n),i=0,a=0,p=0,u=0,y=0,c=0,s=void 0,d=void 0,f=void 0;for(r[0]=0;++i<n;)r[i]=i;for(;++a<o;){for(p=i=0,c=y,r[(y=a*n)+i]=a;++i<n;)s=r[c+i]+1,d=r[y+p]+1,f=r[c+p]+(t[u]==e[p]?0:1),r[y+i]=s<d?s<f?s:f:d<f?d:f,++p;u=a}return r},majinbuu=function(t,e,o){var n=t.length,r=e.length,i=(o||1/0)<Math.sqrt((n||1)*(r||1));n<1||i?(r||i)&&t.splice.apply(t,[0,n].concat(e)):r<1?t.splice(0):performOperations(t,getOperations(t,e,levenstein(t,e)))},performOperations=function(t,e){var o=e.length,n=0,r=1,i=void 0,a=void 0,p=void 0;if(o){for(p=a=e[0];r<o;)i=e[r++],a.type===i.type&&i.x-a.x<=1&&i.y-a.y<=1?(p.count+=i.count,p.items=p.items.concat(i.items)):(t.splice.apply(t,[p.y+n,p.count].concat(p.items)),n+=p.type===INSERT?p.items.length:p.type===DELETE?-p.count:0,p=i),a=i;t.splice.apply(t,[p.y+n,p.count].concat(p.items))}};majinbuu.aura=aura,exports.aura=aura,exports.majinbuu=majinbuu,exports.default=majinbuu;